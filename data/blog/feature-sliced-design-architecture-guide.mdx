---
title: 'Feature-Sliced Design: The best frontend architecture'
date: '2025-01-21'
tags: ['architecture', 'frontend', 'react', 'fsd', 'design-patterns']
draft: false
summary: 'TÃ¬m hiá»ƒu vá» Feature-Sliced Design (FSD), má»™t phÆ°Æ¡ng phÃ¡p kiáº¿n trÃºc frontend giÃºp tá»• chá»©c code má»™t cÃ¡ch cÃ³ há»‡ thá»‘ng, á»•n Ä‘á»‹nh vÃ  dá»… báº£o trÃ¬ cho cÃ¡c dá»± Ã¡n frontend lá»›n.'
authors: ['default']
layout: 'PostLayout'
---

## Giá»›i thiá»‡u vá» Feature-Sliced Design

Feature-Sliced Design (FSD) lÃ  má»™t phÆ°Æ¡ng phÃ¡p luáº­n kiáº¿n trÃºc Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng frontend. ÄÆ¡n giáº£n hÃ³a, Ä‘Ã¢y lÃ  má»™t táº­p há»£p cÃ¡c quy táº¯c vÃ  quy Æ°á»›c vá» viá»‡c tá»• chá»©c code. Má»¥c Ä‘Ã­ch chÃ­nh cá»§a phÆ°Æ¡ng phÃ¡p nÃ y lÃ  lÃ m cho dá»± Ã¡n trá»Ÿ nÃªn dá»… hiá»ƒu vÃ  á»•n Ä‘á»‹nh hÆ¡n trÆ°á»›c nhá»¯ng yÃªu cáº§u kinh doanh luÃ´n thay Ä‘á»•i.

NgoÃ i viá»‡c lÃ  má»™t táº­p há»£p cÃ¡c quy Æ°á»›c, FSD cÃ²n cung cáº¥p má»™t bá»™ cÃ´ng cá»¥ hoÃ n chá»‰nh, bao gá»“m linter Ä‘á»ƒ kiá»ƒm tra kiáº¿n trÃºc dá»± Ã¡n, cÃ¡c cÃ´ng cá»¥ CLI Ä‘á»ƒ táº¡o folder, cÅ©ng nhÆ° má»™t thÆ° viá»‡n phong phÃº cÃ¡c vÃ­ dá»¥ thá»±c táº¿.

## FSD cÃ³ phÃ¹ há»£p vá»›i dá»± Ã¡n cá»§a báº¡n khÃ´ng?

FSD cÃ³ thá»ƒ Ä‘Æ°á»£c triá»ƒn khai trong cÃ¡c dá»± Ã¡n vÃ  team vá»›i má»i quy mÃ´. NÃ³ phÃ¹ há»£p vá»›i dá»± Ã¡n cá»§a báº¡n náº¿u:

- Báº¡n Ä‘ang phÃ¡t triá»ƒn frontend (UI trÃªn web, mobile, desktop, v.v.)
- Báº¡n Ä‘ang xÃ¢y dá»±ng má»™t á»©ng dá»¥ng, khÃ´ng pháº£i thÆ° viá»‡n

Chá»‰ váº­y thÃ´i! KhÃ´ng cÃ³ báº¥t ká»³ háº¡n cháº¿ nÃ o vá» ngÃ´n ngá»¯ láº­p trÃ¬nh, UI framework, hay state manager mÃ  báº¡n sá»­ dá»¥ng. Báº¡n cÅ©ng cÃ³ thá»ƒ Ã¡p dá»¥ng FSD tá»«ng bÆ°á»›c, sá»­ dá»¥ng trong monorepo, vÃ  má»Ÿ rá»™ng quy mÃ´ lá»›n báº±ng cÃ¡ch chia á»©ng dá»¥ng thÃ nh cÃ¡c package vÃ  triá»ƒn khai FSD riÃªng biá»‡t trong tá»«ng package.

## VÃ­ dá»¥ cÆ¡ báº£n

ÄÃ¢y lÃ  má»™t dá»± Ã¡n Ä‘Æ¡n giáº£n triá»ƒn khai FSD:

```
ğŸ“ app
ğŸ“ pages
ğŸ“ shared
```

Nhá»¯ng folder cáº¥p cao nÃ y Ä‘Æ°á»£c gá»i lÃ  **layers** (lá»›p). HÃ£y xem sÃ¢u hÆ¡n:

```
ğŸ“‚ app
  ğŸ“ routes
  ğŸ“ analytics
ğŸ“‚ pages
  ğŸ“ home
  ğŸ“‚ article-reader
    ğŸ“ ui
    ğŸ“ api
  ğŸ“ settings
ğŸ“‚ shared
  ğŸ“ ui
  ğŸ“ api
```

CÃ¡c folder bÃªn trong `ğŸ“‚ pages` Ä‘Æ°á»£c gá»i lÃ  **slices** (slice). ChÃºng chia layer theo domain nghiá»‡p vá»¥ (trong trÆ°á»ng há»£p nÃ y, theo pages).

CÃ¡c folder bÃªn trong `ğŸ“‚ app`, `ğŸ“‚ shared`, vÃ  `ğŸ“‚ pages/article-reader` Ä‘Æ°á»£c gá»i lÃ  **segments**, vÃ  chÃºng chia slices (hoáº·c layers) theo má»¥c Ä‘Ã­ch ká»¹ thuáº­t, tá»©c lÃ  code dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬.

![FSD architecture](/static/images/fsd-architecture.png)

## CÃ¡c khÃ¡i niá»‡m cá»‘t lÃµi

### Layers (Lá»›p)

Layers Ä‘Æ°á»£c chuáº©n hÃ³a trong táº¥t cáº£ cÃ¡c dá»± Ã¡n FSD. Báº¡n khÃ´ng cáº§n pháº£i sá»­ dá»¥ng táº¥t cáº£ cÃ¡c layers, nhÆ°ng tÃªn cá»§a chÃºng lÃ  quan trá»ng. Hiá»‡n táº¡i cÃ³ 7 layers (tá»« trÃªn xuá»‘ng dÆ°á»›i):

1. **App** â€” má»i thá»© lÃ m cho á»©ng dá»¥ng cháº¡y Ä‘Æ°á»£c: routing, entrypoints, global styles, providers
2. **Processes** (deprecated) â€” cÃ¡c ká»‹ch báº£n phá»©c táº¡p liÃªn trang
3. **Pages** â€” cÃ¡c trang Ä‘áº§y Ä‘á»§ hoáº·c cÃ¡c pháº§n lá»›n cá»§a trang trong nested routing
4. **Widgets** â€” cÃ¡c khá»‘i chá»©c nÄƒng hoáº·c UI lá»›n, Ä‘á»™c láº­p, thÆ°á»ng cung cáº¥p toÃ n bá»™ use case
5. **Features** â€” cÃ¡c triá»ƒn khai cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng cá»§a toÃ n bá»™ tÃ­nh nÄƒng sáº£n pháº©m, tá»©c cÃ¡c hÃ nh Ä‘á»™ng mang láº¡i giÃ¡ trá»‹ kinh doanh cho ngÆ°á»i dÃ¹ng
6. **Entities** â€” cÃ¡c thá»±c thá»ƒ kinh doanh mÃ  dá»± Ã¡n lÃ m viá»‡c vá»›i, nhÆ° user hoáº·c product
7. **Shared** â€” chá»©c nÄƒng cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng, Ä‘áº·c biá»‡t khi tÃ¡ch biá»‡t khá»i Ä‘áº·c thÃ¹ cá»§a dá»± Ã¡n/kinh doanh

> **LÆ°u Ã½ quan trá»ng:** Layers App vÃ  Shared, khÃ¡c vá»›i cÃ¡c layers khÃ¡c, khÃ´ng cÃ³ slices vÃ  Ä‘Æ°á»£c chia trá»±c tiáº¿p thÃ nh segments.

**Quy táº¯c import giá»¯a cÃ¡c layers:** CÃ¡c module trÃªn má»™t layer chá»‰ cÃ³ thá»ƒ biáº¿t vá» vÃ  import tá»« cÃ¡c module tá»« cÃ¡c layers **strictly below** (nghiÃªm ngáº·t bÃªn dÆ°á»›i).

### Slices (Slice)

Slices phÃ¢n chia code theo business domain. Báº¡n cÃ³ thá»ƒ tá»± do chá»n báº¥t ká»³ tÃªn nÃ o cho chÃºng vÃ  táº¡o bao nhiÃªu tÃ¹y thÃ­ch. Slices giÃºp codebase dá»… Ä‘iá»u hÆ°á»›ng báº±ng cÃ¡ch giá»¯ cÃ¡c module cÃ³ liÃªn quan logic gáº§n nhau.

**Quy táº¯c quan trá»ng:** Slices khÃ´ng thá»ƒ sá»­ dá»¥ng cÃ¡c slices khÃ¡c trÃªn cÃ¹ng layer, Ä‘iá»u nÃ y giÃºp Ä‘áº£m báº£o high cohesion vÃ  low coupling.

### Segments (PhÃ¢n Ä‘oáº¡n)

Slices, cÅ©ng nhÆ° layers App vÃ  Shared, bao gá»“m cÃ¡c segments. Segments nhÃ³m code theo má»¥c Ä‘Ã­ch sá»­ dá»¥ng. TÃªn segment khÃ´ng bá»‹ rÃ ng buá»™c bá»Ÿi tiÃªu chuáº©n, nhÆ°ng cÃ³ má»™t sá»‘ tÃªn quy Æ°á»›c cho cÃ¡c má»¥c Ä‘Ã­ch phá»• biáº¿n:

- **ui** â€” má»i thá»© liÃªn quan Ä‘áº¿n hiá»ƒn thá»‹ UI: UI components, date formatters, styles, v.v.
- **api** â€” tÆ°Æ¡ng tÃ¡c vá»›i backend: request functions, data types, mappers, v.v.
- **model** â€” data model: schemas, interfaces, stores, vÃ  business logic
- **lib** â€” library code mÃ  cÃ¡c module khÃ¡c trÃªn slice nÃ y cáº§n
- **config** â€” configuration files vÃ  feature flags

ThÆ°á»ng thÃ¬ nhá»¯ng segments nÃ y Ä‘á»§ cho háº§u háº¿t cÃ¡c layers, báº¡n chá»‰ táº¡o segments riÃªng trong Shared hoáº·c App.

## Lá»£i Ã­ch cá»§a FSD

### 1. TÃ­nh Ä‘á»“ng nháº¥t (Uniformity)

VÃ¬ cáº¥u trÃºc Ä‘Æ°á»£c chuáº©n hÃ³a, cÃ¡c dá»± Ã¡n trá»Ÿ nÃªn Ä‘á»“ng nháº¥t hÆ¡n, giÃºp viá»‡c onboarding thÃ nh viÃªn má»›i dá»… dÃ ng hÆ¡n cho team.

### 2. á»”n Ä‘á»‹nh trÆ°á»›c sá»± thay Ä‘á»•i vÃ  refactoring

- Module trÃªn má»™t layer khÃ´ng thá»ƒ sá»­ dá»¥ng module khÃ¡c trÃªn cÃ¹ng layer, hoáº·c cÃ¡c layers á»Ÿ trÃªn
- Äiá»u nÃ y cho phÃ©p báº¡n thá»±c hiá»‡n cÃ¡c sá»­a Ä‘á»•i Ä‘á»™c láº­p mÃ  khÃ´ng cÃ³ háº­u quáº£ khÃ´ng lÆ°á»ng trÆ°á»›c cho pháº§n cÃ²n láº¡i cá»§a á»©ng dá»¥ng

### 3. Kiá»ƒm soÃ¡t viá»‡c tÃ¡i sá»­ dá»¥ng logic

TÃ¹y thuá»™c vÃ o layer, báº¡n cÃ³ thá»ƒ lÃ m cho code ráº¥t cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng hoáº·c ráº¥t cá»¥c bá»™. Äiá»u nÃ y duy trÃ¬ sá»± cÃ¢n báº±ng giá»¯a viá»‡c tuÃ¢n theo nguyÃªn táº¯c DRY vÃ  tÃ­nh thá»±c táº¿.

### 4. Äá»‹nh hÆ°á»›ng theo nhu cáº§u kinh doanh vÃ  ngÆ°á»i dÃ¹ng

á»¨ng dá»¥ng Ä‘Æ°á»£c chia theo business domains vÃ  viá»‡c sá»­ dá»¥ng ngÃ´n ngá»¯ kinh doanh Ä‘Æ°á»£c khuyáº¿n khÃ­ch trong viá»‡c Ä‘áº·t tÃªn, Ä‘á»ƒ báº¡n cÃ³ thá»ƒ lÃ m cÃ´ng viá»‡c sáº£n pháº©m há»¯u Ã­ch mÃ  khÃ´ng cáº§n hiá»ƒu Ä‘áº§y Ä‘á»§ táº¥t cáº£ cÃ¡c pháº§n khÃ´ng liÃªn quan khÃ¡c cá»§a dá»± Ã¡n.

## Chi tiáº¿t tá»«ng Layer

### Shared Layer

Táº¡o ná»n táº£ng cho pháº§n cÃ²n láº¡i cá»§a á»©ng dá»¥ng. ÄÃ¢y lÃ  nÆ¡i táº¡o káº¿t ná»‘i vá»›i tháº¿ giá»›i bÃªn ngoÃ i (backends, third-party libraries, environment) vÃ  Ä‘á»‹nh nghÄ©a cÃ¡c thÆ° viá»‡n cÃ³ tÃ­nh chá»©a Ä‘á»±ng cao.

CÃ¡c segments phá»• biáº¿n:

- `ğŸ“ api` â€” API client vÃ  cÃ¡c functions Ä‘á»ƒ táº¡o requests Ä‘áº¿n backend endpoints cá»¥ thá»ƒ
- `ğŸ“ ui` â€” UI kit cá»§a á»©ng dá»¥ng
- `ğŸ“ lib` â€” táº­p há»£p cÃ¡c thÆ° viá»‡n ná»™i bá»™
- `ğŸ“ config` â€” environment variables, global feature flags
- `ğŸ“ routes` â€” route constants hoáº·c patterns Ä‘á»ƒ match routes

### Entities Layer

CÃ¡c slices trÃªn layer nÃ y Ä‘áº¡i diá»‡n cho cÃ¡c khÃ¡i niá»‡m tá»« tháº¿ giá»›i thá»±c mÃ  dá»± Ã¡n Ä‘ang lÃ m viá»‡c vá»›i. ThÆ°á»ng thÃ¬ Ä‘Ã¢y lÃ  cÃ¡c thuáº­t ngá»¯ mÃ  kinh doanh sá»­ dá»¥ng Ä‘á»ƒ mÃ´ táº£ sáº£n pháº©m. VÃ­ dá»¥: User, Post, Group.

Entity slice cÃ³ thá»ƒ chá»©a:

- Data storage (`ğŸ“ model`)
- Data validation schemas (`ğŸ“ model`)
- Entity-related API request functions (`ğŸ“ api`)
- Visual representation (`ğŸ“ ui`)

### Features Layer

Layer nÃ y dÃ nh cho cÃ¡c tÆ°Æ¡ng tÃ¡c chÃ­nh trong á»©ng dá»¥ng, nhá»¯ng thá»© mÃ  ngÆ°á»i dÃ¹ng quan tÃ¢m thá»±c hiá»‡n. CÃ¡c tÆ°Æ¡ng tÃ¡c nÃ y thÆ°á»ng liÃªn quan Ä‘áº¿n business entities.

**NguyÃªn táº¯c quan trá»ng:** KhÃ´ng pháº£i má»i thá»© Ä‘á»u cáº§n lÃ  feature. Chá»‰ nÃªn táº¡o feature khi nÃ³ Ä‘Æ°á»£c tÃ¡i sá»­ dá»¥ng trÃªn nhiá»u trang.

### Widgets Layer

DÃ nh cho cÃ¡c khá»‘i UI lá»›n, tá»± cung cáº¥p Ä‘áº§y Ä‘á»§. Widgets há»¯u Ã­ch nháº¥t khi Ä‘Æ°á»£c tÃ¡i sá»­ dá»¥ng trÃªn nhiá»u trang, hoáº·c khi trang chá»©a chÃºng cÃ³ nhiá»u khá»‘i Ä‘á»™c láº­p lá»›n.

### Pages Layer

Pages táº¡o nÃªn websites vÃ  applications. Má»™t page thÆ°á»ng tÆ°Æ¡ng á»©ng vá»›i má»™t slice, tuy nhiÃªn náº¿u cÃ³ nhiá»u pages ráº¥t giá»‘ng nhau, chÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c nhÃ³m vÃ o má»™t slice.

### App Layer

Táº¥t cáº£ cÃ¡c váº¥n Ä‘á» app-wide, cáº£ vá» máº·t ká»¹ thuáº­t (context providers) vÃ  kinh doanh (analytics).

CÃ¡c segments phá»• biáº¿n:

- `ğŸ“ routes` â€” cáº¥u hÃ¬nh router
- `ğŸ“ store` â€” cáº¥u hÃ¬nh global store
- `ğŸ“ styles` â€” global styles
- `ğŸ“ entrypoint` â€” entrypoint Ä‘áº¿n application code

## Chiáº¿n lÆ°á»£c Ã¡p dá»¥ng tá»«ng bÆ°á»›c

Náº¿u báº¡n cÃ³ má»™t codebase hiá»‡n táº¡i muá»‘n migrate sang FSD:

1. **Báº¯t Ä‘áº§u tá»« tá»«** báº±ng cÃ¡ch Ä‘á»‹nh hÃ¬nh App vÃ  Shared layers tá»«ng module Ä‘á»ƒ táº¡o ná»n táº£ng

2. **PhÃ¢n phá»‘i táº¥t cáº£ UI hiá»‡n táº¡i** qua Widgets vÃ  Pages báº±ng nÃ©t váº½ rá»™ng, ngay cáº£ khi chÃºng cÃ³ dependencies vi pháº¡m quy táº¯c FSD

3. **Báº¯t Ä‘áº§u tá»« tá»« giáº£i quyáº¿t** cÃ¡c import violations vÃ  cÅ©ng trÃ­ch xuáº¥t Entities vÃ  cÃ³ thá»ƒ cáº£ Features

4. **TrÃ¡nh thÃªm entities lá»›n má»›i** trong khi refactoring hoáº·c chá»‰ refactor má»™t sá»‘ pháº§n cá»§a dá»± Ã¡n

## Káº¿t luáº­n

Feature-Sliced Design cung cáº¥p má»™t cÃ¡ch tiáº¿p cáº­n cÃ³ há»‡ thá»‘ng Ä‘á»ƒ tá»• chá»©c code frontend, giÃºp:

- Dá»± Ã¡n dá»… hiá»ƒu vÃ  Ä‘iá»u hÆ°á»›ng hÆ¡n
- á»”n Ä‘á»‹nh trÆ°á»›c cÃ¡c thay Ä‘á»•i yÃªu cáº§u kinh doanh
- Team má»›i cÃ³ thá»ƒ onboard nhanh chÃ³ng
- Code cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng Ä‘Æ°á»£c kiá»ƒm soÃ¡t tá»‘t

FSD khÃ´ng chá»‰ lÃ  má»™t phÆ°Æ¡ng phÃ¡p lÃ½ thuyáº¿t mÃ  cÃ²n Ä‘i kÃ¨m vá»›i cÃ¡c cÃ´ng cá»¥ thá»±c táº¿, giÃºp báº¡n triá»ƒn khai vÃ  duy trÃ¬ kiáº¿n trÃºc nÃ y má»™t cÃ¡ch hiá»‡u quáº£ trong dá»± Ã¡n thá»±c táº¿.

Táº¡m váº­y. Sáº½ viáº¿t tiáº¿p sau.

```

```
